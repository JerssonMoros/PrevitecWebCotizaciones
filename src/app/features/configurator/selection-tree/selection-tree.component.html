<!-- Contenedor del Mapa Mental (Scrollable) -->
<div #scrollContainer class="flex-grow overflow-x-auto overflow-y-hidden p-4">
  <div class="flex flex-row gap-8 pb-4">

    <!-- Renderizado de Niveles -->
    @for (level of computedLevels(); track $index; let levelIndex = $index) {
      <div class="flex flex-col gap-3 flex-shrink-0 w-64 border-l-2 border-gray-200 pl-6">
        <!-- Título del Nivel -->
        <h2 class="text-lg font-semibold text-blue-700 -ml-6 pl-5 py-1 border-l-4 border-blue-700 bg-blue-50">
          {{ level.title }}
        </h2>
        <!-- Opciones -->
        @for (option of level.options; track option.label) {
          <button
            (click)="handleSelection(option, levelIndex)"
            [class]="selectionPath()[levelIndex]?.label === option.label
              ? 'bg-blue-600 text-white shadow-lg scale-105'
              : 'bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md'"
            class="p-4 rounded-lg shadow-sm border border-gray-200 text-left w-full transition-all duration-200 ease-in-out transform hover:-translate-y-0.5">
            <span class="text-base font-semibold">{{ option.label }}</span>
          </button>
        }
      </div>
    }
  </div>
</div>

<!-- Mensaje final o Botón de reseteo -->
@if (isSelectionComplete()) {
  <div class="mt-8 text-center flex-shrink-0">
    <button
      (click)="reset()"
      class="px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors duration-200 shadow-lg hover:shadow-xl">
      Comenzar de Nuevo
    </button>
  </div>
} @else if (selectionPath().length > 0) {
  <div class="mt-8 text-center flex-shrink-0">
    <button
     (click)="reset()"
     class="px-5 py-2 bg-gray-500 text-white font-semibold rounded-lg hover:bg-gray-600 transition-colors duration-200">
     Reiniciar Selección
   </button>
  </div>
}